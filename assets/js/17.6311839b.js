(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{532:function(t,e,r){t.exports=r.p+"assets/img/Clang-LLVM.433d364d.png"},533:function(t,e,r){t.exports=r.p+"assets/img/0.3f77f104.png"},554:function(t,e,r){"use strict";r.r(e);var n=r(6),a=Object(n.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h3",{attrs:{id:"ä¸ºä»€ä¹ˆè¦çƒ­ä¿®å¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆè¦çƒ­ä¿®å¤"}},[t._v("#")]),t._v(" ä¸ºä»€ä¹ˆè¦çƒ­ä¿®å¤")]),t._v(" "),n("p",[t._v("åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¾ˆéš¾é¿å… BUG çš„å­˜åœ¨ï¼Œå°¤å…¶æ˜¯å¯¹äºä¸€äº›è¾¾åˆ°ä¸€å®šè§„æ¨¡çš„ App å› ä¸ºåä½œæ¨¡å¼é”™ç»¼å¤æ‚ï¼Œå°±å¾ˆå®¹æ˜“å¸¦ç€é—®é¢˜ä¸Šçº¿ã€‚")]),t._v(" "),n("p",[t._v("ä¸€æ—¦é—®é¢˜ä¸Šçº¿ä¹‹åï¼Œé—®é¢˜å°±éº»çƒ¦äº†ï¼Œä¸ä»…éœ€è¦é‡æ–°æ‰“åŒ…ã€æµ‹è¯•ï¼Œè€Œä¸”è¿˜éœ€è¦é‡æ–°æäº¤å®¡æ ¸ï¼Œè€Œè¿™ç§ä¿®å¤é—®é¢˜çš„æ–¹å¼å¾€å¾€æ˜¯ä½æ•ˆä¸”æ¼«é•¿çš„ã€‚")]),t._v(" "),n("p",[t._v("å› æ­¤ï¼Œåœ¨å¼€å‘ä¸€ä¸ª App çš„è¿‡ç¨‹ä¸­ï¼Œç¨³å®šæ€§çš„å°±å˜æˆäº†ä¸€ä¸ªéš¾é¢˜ï¼Œå”¯ä¸€çš„åŸå› å°±æ˜¯ä¸å¸Œæœ›å¸¦ç€é—®é¢˜ä¸Šçº¿å¯¼è‡´ç”¨æˆ·å¯¹ App å¤±å»ä¿¡ä»»ã€‚")]),t._v(" "),n("p",[t._v("çƒ­ä¿®å¤å°±å¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™ç±»æ£˜æ‰‹çš„é—®é¢˜ï¼Œå› æ­¤å¸¦ç€å¥½å¥‡ä¹‹å¿ƒï¼Œç ”ç©¶äº†ä¸€ä¸‹çƒ­ä¿®å¤åœ¨ iOS ç«¯çš„å¯è¡Œæ€§ï¼Œå®ç°\näº†ä¸€ä¸ªè¾ƒä¸ºå®Œå¤‡çš„çƒ­ä¿®å¤æ¡†æ¶ï¼Œæˆ‘æŠŠå®ƒå«åš OCRunnerã€‚")]),t._v(" "),n("p",[t._v("æˆ‘ä¹Ÿä¼šåœ¨æœªæ¥å‡ ä¸ªæœˆï¼ŒæŠŠæˆ‘åš OCRunner çš„ä¸€äº›ç»éªŒæ€»ç»“æˆåšæ–‡ï¼Œåœ¨ã€Œè€å¸æœºæŠ€æœ¯å‘¨æŠ¥ã€çš„å…¬ä¼—å·ä¸Šä¸å¤§\nå®¶åˆ†äº«ã€‚")]),t._v(" "),n("h3",{attrs:{id:"å·²æœ‰çš„å¼€æºæ–¹æ¡ˆ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å·²æœ‰çš„å¼€æºæ–¹æ¡ˆ"}},[t._v("#")]),t._v(" å·²æœ‰çš„å¼€æºæ–¹æ¡ˆ")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("é‡‡ç”¨ "),n("strong",[t._v("JavaScriptCore")]),t._v(" çš„æ–¹æ¡ˆ")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://github.com/bang590/JSPatch",target:"_blank",rel:"noopener noreferrer"}},[n("em",[t._v("JSPatch")]),n("OutboundLink")],1),t._v("é€šè¿‡ä¸‹å‘ JavaScript è„šæœ¬ï¼Œä½¿ç”¨ç³»ç»Ÿæä¾›çš„  JavaScriptCore æ‰§è¡Œ JavaScript è„šæœ¬ï¼Œé€šè¿‡ JavaScript ä»£ç è§£æä»£ç ä¸­çš„ç±»ä¿¡æ¯ï¼ŒåŠ¨æ€è°ƒç”¨ç›¸åº”çš„ Objective-C å‡½æ•°ï¼Œç„¶åé…åˆ libffi ä¿®æ”¹ Runtimeï¼Œæœ€ç»ˆå®ç°çƒ­æ›´æ–°ï¼Œå¥ å®šäº† Objective-C çš„çƒ­ä¿®å¤åŸºç¡€ã€‚")]),t._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/yangyangFeng/TTPatch",target:"_blank",rel:"noopener noreferrer"}},[n("em",[t._v("TTPatch")]),n("OutboundLink")],1),t._v("å’Œ JSPatch ä¸€æ ·ä½¿ç”¨ JavaScriptCore æ‰§è¡Œ JavaScript è„šæœ¬ï¼Œä½†æ”¯æŒå®æ—¶é¢„è§ˆï¼Œè¿™ä¸ªæ˜¯æˆ‘è¶…çº§å–œæ¬¢çš„åŠŸèƒ½ã€‚")])])]),t._v(" "),n("li",[n("p",[t._v("è‡ªå®ç°è„šæœ¬è§£é‡Šå™¨çš„æ–¹æ¡ˆ")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://github.com/lilidan/OCEval",target:"_blank",rel:"noopener noreferrer"}},[n("em",[t._v("OCEval")]),n("OutboundLink")],1),t._v("ä¸‹å‘ Objective-C æºç è§£é‡Šæ‰§è¡Œï¼Œä½†æ”¯æŒçš„è¯­æ³•æœ‰é™ã€‚ä½œè€…"),n("a",{attrs:{href:"https://github.com/lilidan",target:"_blank",rel:"noopener noreferrer"}},[t._v("lilidan"),n("OutboundLink")],1),t._v("è‡ªå·±å®ç°äº† Objective-C çš„è¯æ³•åˆ†æå™¨å’Œè¯­æ³•åˆ†æå™¨ã€‚å…¶ä¸­çš„"),n("a",{attrs:{href:"https://github.com/lilidan/OCEval/blob/master/OCEval/helper/FuntionSearch.c",target:"_blank",rel:"noopener noreferrer"}},[t._v("FunctionSearchçš„å®ç°"),n("OutboundLink")],1),t._v("ä¹Ÿå¸®åŠ©äº†æˆ‘è®¸å¤šã€‚"),n("a",{attrs:{href:"https://github.com/letqingbin/DynamicOC",target:"_blank",rel:"noopener noreferrer"}},[t._v("DynamicOC"),n("OutboundLink")],1),t._v("å°† OCEvel çš„è¯æ³•è§£æå™¨å’Œè¯­æ³•è§£æå™¨ä½¿ç”¨ lex&yacc å®ç°ã€‚")]),t._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/YPLiang19/Mango",target:"_blank",rel:"noopener noreferrer"}},[n("em",[t._v("Mango")]),n("OutboundLink")],1),t._v("ä½œè€…è®¾è®¡äº† Mango çš„è„šæœ¬è¯­è¨€ï¼ˆå’Œ Objective-C æä¸ºç›¸ä¼¼ï¼‰ï¼Œä½¿ç”¨ lex&yacc ç”Ÿæˆè¯­æ³•æ ‘ï¼Œç„¶åå†å°† Mango è„šæœ¬çš„è¯­æ³•æ ‘è§£é‡Šæ‰§è¡Œã€‚è¿™ä¹Ÿå°±æ˜¯ OCRunner çš„èµ·æºã€‚")]),t._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/SilverFruity/OCRunner",target:"_blank",rel:"noopener noreferrer"}},[t._v("OCRunner"),n("OutboundLink")],1),t._v("æ˜¯æˆ‘åœ¨ Mango çš„åŸºç¡€ä¹‹ä¸Šä¼˜åŒ–åçš„ä¸€ä¸ªæ–¹æ¡ˆã€‚å’Œ Mango ç›¸åŒçš„æ˜¯ï¼Œé‡‡ç”¨lex&yaccç”Ÿæˆè¯­æ³•æ ‘åè§£é‡Šæ‰§è¡Œã€JSPatch çš„ Runtime çš„æ€æƒ³ã€‚ä½†è¿™ä¸€æ¬¡ï¼Œæˆ‘ä»¬å¯ä»¥ä¹¦å†™ Objective-Cï¼Œç„¶åç›´æ¥åŠ¨æ€æ‰§è¡Œå®ƒã€‚åŒæ—¶ä¹Ÿæ”¯æŒäº†è®¸å¤šç‰¹æ€§ï¼šç»“æ„ä½“ã€æšä¸¾ã€å‡½æ•°æŒ‡é’ˆç­‰ã€‚")])])])]),t._v(" "),n("p",[n("strong",[t._v("å…¶ä»–åº“ä¸è¶³çš„é—®é¢˜:")])]),t._v(" "),n("ol",[n("li",[t._v("æ”¯æŒä¸å¤Ÿå®Œå–„ï¼šç»“æ„ä½“ã€ç³»ç»Ÿå‡½æ•°ã€æšä¸¾ç­‰ã€‚")]),t._v(" "),n("li",[t._v("è¯­æ³•é—®é¢˜ï¼šä¸€äº›è¯­æ³•ä¸Šçš„å°é—®é¢˜ï¼Œæœ‰æ—¶å€™æ— å¼‚äºå›ç‚‰é‡é€ ï¼Œä¹Ÿæ˜¯éœ€è¦æ—¶é—´æˆæœ¬çš„ã€‚æœ‰æ—¶å€™ä¸€äº›å¥‡æ€ªçš„è¯­æ³•é—®é¢˜ï¼Œæˆ–è®¸éƒ½è¦èŠ±ä½ ä¸€ä¸ªä¸‹åˆçš„æ—¶é—´ã€‚")]),t._v(" "),n("li",[t._v("ä¼ è¾“åŠ è§£å¯†:  JSPatch ç­‰å‡é‡‡ç”¨ RSA (éå¯¹ç§°åŠ å¯†)å¯¹æ•´ä¸ªè„šæœ¬è¿›è¡ŒåŠ å¯†ï¼Œä¸ªäººè®¤ä¸ºç€å®è€—è´¹æ€§èƒ½äº†ä¸€äº›ã€‚")])]),t._v(" "),n("h3",{attrs:{id:"ä¸ºä»€ä¹ˆè¦å†™-ocrunner"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆè¦å†™-ocrunner"}},[t._v("#")]),t._v(" ä¸ºä»€ä¹ˆè¦å†™ OCRunner")]),t._v(" "),n("p",[t._v("â€‹\tè¿™æ¬¡å¯ä»¥æ…¢æ…¢çš„è®¨è®ºè¿™ä¸ªé—®é¢˜äº†~")]),t._v(" "),n("p",[t._v("â€‹\t19 å¹´ 4 æœˆçš„æ—¶å€™ï¼Œåˆšå¥½åœ¨è¶‹åŠ¿æ¦œä¸Šçœ‹è§äº†"),n("a",{attrs:{href:"https://github.com/YPLiang19/Mango",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mango"),n("OutboundLink")],1),t._v("é¡¹ç›®ï¼Œå‘ç°å®ƒæ˜¯ä½¿ç”¨è‡ªå®šä¹‰çš„ã€å’Œ Objective-C è¯­æ³•éå¸¸ç›¸ä¼¼çš„è„šæœ¬è¯­è¨€ï¼ˆç›¸å½“äºè‡ªå·±åˆ›é€ ä¸€åè¯­è¨€å§ï¼Œbalabalaï¼‰ï¼Œå½“æ—¶æ—©å·²å¯¹ç¼–è¯‘ç›¸å…³çš„å¿ƒé©°ç¥å¾€ï¼Œå¥ˆä½•ä¸€ç›´æ²¡æœ‰ä¸€ä¸ªåˆé€‚çš„æœºä¼šå»å­¦ä¹ ï¼Œå†åŠ ä¸Šå½“æ—¶çš„å…¬å¸æœ‰çƒ­æ›´æ–°çš„éœ€æ±‚ï¼Œå°±æƒ³ç€è¯•ä¸€è¯•ï¼Œçœ‹èƒ½ä¸èƒ½å†™ä¸€ä¸ªå°† Objective-C ä»£ç è½¬æ¢ä¸º Mango è„šæœ¬çš„è½¬æ¢å™¨ï¼ˆä¹Ÿæƒ³è¿‡èƒ½ä¸èƒ½å€Ÿæ­¤è‡ªå·±å®Œæˆä¸€ä¸ªçƒ­æ›´æ–°åº“ï¼‰ã€‚")]),t._v(" "),n("p",[t._v("â€‹\t19 å¹´ 4 æœˆ æ™šä¸Š 10 ç‚¹æ­£å¼å¼€å¯äº†æ¯å¤©å›å®¶çˆ†è‚ lex&yacc çš„å‡çº§æ‰“æ€ªä¹‹è·¯ï¼Œå„ç§å„æ ·çš„é—®é¢˜ç‚¸å¾—æˆ‘åœ¨é”…é‡Œåå¤æ¨ªè·³ï¼ˆè§£å†³åŠæ³•: ã€Œ  lex&yacc.pdf ã€æŠ±ç€å•ƒï¼‰ï¼Œä½†æœ€ä¸¥é‡çš„çš„è«è¿‡äºæŒ‡é’ˆç›¸å…³çš„ï¼Œå‚è€ƒäº†å¥½å‡ ä¸ªåŸºäº lex&yacc çš„å¼€æºç¼–è¯‘å™¨ï¼Œæ‰å¾—ä»¥æ‰¾åˆ°æŠ˜ä¸­çš„è§£å†³åŠæ³•ã€‚ä¸­é—´ä¹Ÿå‘ç”Ÿäº†è®¸å¤šäº‹æƒ…ï¼Œä» 19 å¹´ 7 æœˆåï¼Œæˆ‘ä¼‘æ¯äº†4ä¸ªæœˆã€‚")]),t._v(" "),n("p",[t._v("â€‹\t20 å¹´ 3 æœˆçš„æ—¶å€™ï¼Œæƒ³ç€ oc2mango åšäº†é‚£ä¹ˆä¹…ï¼Œå¾—æŠŠç¿»è¯‘å™¨åšå‡ºæ¥äº†æ‰èƒ½ç»™è‡ªå·±ä¸€ä¸ªäº¤ä»£ï¼Œè‚äº†ä¸€æ®µæ—¶é—´ï¼Œæ­£ç¡®çš„ä½¿ç”¨ yyless åï¼Œé—®é¢˜ç›¸è¾ƒä¹‹å‰å·²ç»å°‘äº†å¾ˆå¤šã€‚è¿™ä¸ªæ—¶å€™ oc2mango ç¿»è¯‘å™¨ä¹Ÿèƒ½æ­£å¸¸ä½¿ç”¨äº†ï¼Œè™½ç„¶ä»æœ‰ä¸€äº›å°é—®é¢˜ã€‚è¿™ä¸ªæ—¶å€™ç¿»è¯‘å™¨çš„å°ç›®æ ‡ä¹Ÿå°±å®Œæˆäº†âœŒï¸ã€‚")]),t._v(" "),n("p",[t._v("â€‹\tå½“ç¿»è¯‘å™¨å®Œæˆä»¥åï¼Œæˆ‘çš„é‡å¿ƒå˜å¤§äº†ï¼Œæˆ‘æƒ³è¯•è¯•æˆ‘è‡ªå·±èƒ½ä¸èƒ½å®Œæˆä¸€ä¸ªåƒ Mango ä¸€æ ·çš„çƒ­æ›´æ–°åº“ï¼ˆå†…å¿ƒæˆï¼š lex&yacc å°±æ˜¯ä»å®ƒé‚£å„¿å­¦æ¥çš„ï¼Œåº”è¯¥ä¸éš¾å§ï¼ŸğŸ˜‚ï¼‰ã€‚ç»“æœç¡®å®æ˜¯å¹´å°‘æ— çŸ¥ï¼Œå„ç§å„æ ·çš„å‘ã€‚å½“å®Œæˆäº†å’Œ Mango ä¸€æ ·çš„åŠŸèƒ½æ—¶ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘å°±å·²ç»å¾ˆæƒ³è·å¾— github çš„âœ¨âœ¨äº†ï¼Œè·‘å»æäº†ä¸€ä¸ªè€å¸æœºçš„ issueï¼Œé¢ï¼Œè¢«æ‰“å›æ¥äº†ï¼Œä¹Ÿæ˜¯åº”è¯¥çš„ï¼Œå½“æ—¶ç¡®å®æœ‰å¾ˆå¤šé—®é¢˜ï¼ˆå¤©çœŸçš„ä»¥ä¸ºï¼Œarm64 ä¸‹ï¼Œç›´æ¥å°†å‚æ•°æ”¾åœ¨ç›¸åº”çš„å¯„å­˜å™¨ä¸Šï¼Œç„¶åè°ƒç”¨å‡½æ•°å°±è¡Œäº† ğŸ‘ï¼‰ã€‚åé¢å»è®¤çœŸçœ‹äº† arm64 ç¨‹åºè°ƒç”¨æ ‡å‡†å’Œ libffi çš„ä»£ç åï¼Œè‡ªç„¶è€Œç„¶çš„ä¹Ÿå°±å®ç°äº†è‡ªå®šä¹‰ arm64 ABIï¼ˆå…¶å®å“­ç€çœ‹äº†ä¸€ä¸ªæœˆï¼‰ã€‚åç»­ä¹Ÿå®ç°äº†ç»“æ„ä½“å’Œç³»ç»Ÿå‡½æ•°æŒ‡é’ˆçš„è°ƒç”¨ä»¥åŠ Json è¡¥ä¸å’ŒäºŒè¿›åˆ¶è¡¥ä¸ã€‚")]),t._v(" "),n("p",[t._v("â€‹\tç›´åˆ°å‘å¸ƒ"),n("a",{attrs:{href:"https://silverfruity.github.io/2020/09/04/OCRunner/",target:"_blank",rel:"noopener noreferrer"}},[t._v("OCRunnerï¼šå®Œå…¨ä½“çš„iOSçƒ­ä¿®å¤æ–¹æ¡ˆ"),n("OutboundLink")],1),t._v(" åï¼Œæˆ‘æ‰æ¯å¤©å¼€å¼€å¿ƒå¿ƒçš„çœ‹ç€ star çªçªçš„æ¶¨ã€‚")]),t._v(" "),n("p",[t._v("â€‹\tå…¶å®æ‰“ä»ä¸€å¼€å§‹ï¼Œæˆ‘å°±æ²¡æƒ³è¿‡æˆ‘ä¼šæŠŠ OCRunner å†™å‡ºæ¥ï¼Œæœ€å¼€å§‹çš„æ—¶å€™ç¦»æˆ‘å¤ªé¥è¿œäº†ï¼Œæˆ‘ä¹Ÿåªèƒ½ç»™è‡ªå·±ä¸€æ­¥ä¸€æ­¥çš„å®šä¸€ä¸ªå°ç›®æ ‡ã€‚èµ·åˆçš„æ—¶å€™ï¼Œgithub æ˜Ÿæ˜Ÿç®—ä¸ä¸Šæˆ‘çš„åŠ¨åŠ›ï¼Œoc2mango å’Œ OCRunner æå°‘çš„æ˜Ÿæ˜Ÿä¹Ÿæ˜¯å»ç¾¤é‡Œè´´å°å¹¿å‘Šæ¥çš„ã€‚æ›´å¤šçš„åŠ¨åŠ›ï¼Œå…¶å®æ˜¯æ¥æºäºè‡ªå·±å®Œæˆäº†ä¸€ä¸ªåˆä¸€ä¸ªçš„ç›®æ ‡åçš„æˆå°±æ„Ÿï¼Œåˆ«äººä¸èƒ½æ»¡è¶³è‡ªå·±ï¼Œå°±è‡ªå·±æ»¡è¶³è‡ªå·±å§ğŸ˜‚ï¼ˆå•¤é…’ç‚¸é¸¡èµ°èµ· hhhhï¼‰ã€‚ä¿æŒä¸€ä¸ªä¹è§‚çš„å¿ƒæ€ï¼Œå‘å‰å†²~")]),t._v(" "),n("h3",{attrs:{id:"æ•´ä½“æ¶æ„çš„å¯å‘"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ•´ä½“æ¶æ„çš„å¯å‘"}},[t._v("#")]),t._v(" æ•´ä½“æ¶æ„çš„å¯å‘")]),t._v(" "),n("p",[t._v("åœ¨è¯´OCRunnerä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆèŠèŠClangå’ŒLLVMï¼ˆè®©æˆ‘å¤šæ‰“å‡ ä¸ªå­—ğŸ˜‚ï¼‰ã€‚")]),t._v(" "),n("p",[t._v("é€šå¸¸æˆ‘ä»¬åœ¨Xcodeä¸Šè¿è¡Œ Objective-C ä»£ç æ—¶ï¼Œæˆ‘ä»¬çš„ç¼–è¯‘å™¨å‰ç«¯ä½¿ç”¨çš„æ˜¯Clangï¼Œåç«¯ä½¿ç”¨çš„æ˜¯LLVMã€‚é¦–å…ˆ Clang å®ƒé€šè¿‡è¯æ³•ã€è¯­æ³•åˆ†æåï¼Œç”Ÿæˆ æŠ½è±¡è¯­æ³•æ ‘ ï¼Œå†ç”± æŠ½è±¡è¯­æ³•æ ‘ ç”Ÿæˆ LLVM IR äº¤ç»™ LLVM è¿›è¡Œä»£ç ä¼˜åŒ–ï¼Œæœ€åå°†ä¼˜åŒ–åçš„ LLVM IR ç”ŸæˆæŒ‡å®šå¹³å°çš„æœºå™¨ä»£ç ï¼Œå¦‚å›¾ï¼š")]),t._v(" "),n("p",[n("img",{attrs:{src:r(532),alt:""}}),t._v(" "),n("a",{attrs:{href:"https://blog.csdn.net/xhhjin/article/details/81164076",target:"_blank",rel:"noopener noreferrer"}},[t._v("å›¾ç‰‡å‡ºè‡ª: ç®€è¿° LLVM ä¸ Clang åŠå…¶å…³ç³»"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("åœ¨å†™ OCRunner ä¹‹å‰ï¼Œæˆ‘å°±åœ¨æƒ³ï¼Œèƒ½ä¸èƒ½ç”¨ç›¸ä¼¼çš„æ¶æ„å»å®Œæˆ OCRunner ï¼Ÿ")]),t._v(" "),n("p",[t._v("Clangæ›¿æ¢ä¸ºè‡ªå·±æ’¸çš„æ¸£æ¸£ç¼–è¯‘å™¨ï¼ŒLLVM æ›¿æ¢ä¸ºè‡ªå·±å®Œæˆçš„è§£é‡Šæ‰§è¡Œå™¨ï¼ŒLLVM IRï¼ˆä¸­é—´ä»£ç ï¼‰æ›¿æ¢ä¸º æŠ½è±¡è¯­æ³•æ ‘ æˆ–è€…æ˜¯å…¶ä»–ã€‚ä»£ç ä¼˜åŒ–ï¼Œä¸å­˜åœ¨çš„ï¼Œè¿œç€å‘¢ï¼Œå“ˆå“ˆã€‚")]),t._v(" "),n("p",[t._v("ä½†æ˜¯ï¼Œç›®å‰é¦–å…ˆéœ€è¦åšçš„æ˜¯ï¼ŒOCRunnerèƒ½å¤Ÿæ­£å¸¸è·‘èµ·æ¥ğŸ˜‚ã€‚")]),t._v(" "),n("p",[t._v("OCRunner æ˜¯ä¸€ä¸ªå°† Objective-C ä»£ç ä½œä¸ºè¾“å…¥çš„"),n("strong",[t._v("è¯­æ³•æ ‘è§£é‡Šæ‰§è¡Œå™¨")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("å…¶ä¸»è¦è¿‡ç¨‹ä¸º: Objective-C -> æŠ½è±¡è¯­æ³•æ ‘ -> è§£é‡Šæ‰§è¡Œè¯­æ³•æ ‘ã€‚")]),t._v(" "),n("p",[t._v("æ²¡æœ‰äº†è§£è¿‡è¿™æ–¹é¢çš„äººï¼Œå…‰æ˜¯çœ‹ç€æŠ½è±¡è¯­æ³•æ ‘è¿™ä¸ªé¬¼å°±å·²ç»å¤´å¤§äº†ï¼Œä½•å†µæ˜¯è§£é‡Šæ‰§è¡Œè¯­æ³•æ ‘ï¼ˆä½œè€…ä¹Ÿæ˜¯è¿‡æ¥äººä¹‹ä¸€ğŸ»ï¼‰ã€‚ä½†æ˜¯ç›¸ä¿¡å¤§å®¶çœ‹å®Œæ•´ä¸ªæ–‡ç« ä»¥åï¼Œå¯¹æŠ½è±¡è¯­æ³•æ ‘çš„è®¤è¯†ä¼šå°è±¡æ·±åˆ»çš„ã€‚")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("Objective-C -> æŠ½è±¡è¯­æ³•æ ‘:  ç”± oc2mangoLib æ¥å®Œæˆã€‚")])]),t._v(" "),n("li",[n("p",[t._v("æŠ½è±¡è¯­æ³•æ ‘ -> è§£é‡Šæ‰§è¡Œè¯­æ³•æ ‘: ç”± OCRunner æ¥å®Œæˆã€‚")])])]),t._v(" "),n("blockquote",[n("p",[t._v("èµ·åˆçš„ OCRunner é¡¹ç›®ä¸­æ˜¯åŒ…å«äº† oc2mangoLib åº“çš„ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ")])]),t._v(" "),n("ol",[n("li",[t._v("ä½œè€…å½“æ—¶å¯¹ Mango ä¸­çš„å¾ˆå¤šä¸œè¥¿ä¹Ÿä¸€çŸ¥åŠè§£ï¼Œéœ€è¦ç”¨å½“å‰å·²æœ‰çš„æ–¹å¼å»å®ç°ï¼Œç­‰å®ƒçš„åŸºç¡€åŠŸèƒ½å®Œå–„ä»¥åï¼Œæ‰æœ‰æ—¶é—´å»å°è¯•æˆ‘è‡ªå·±çš„ä¸œè¥¿ã€‚")]),t._v(" "),n("li",[t._v("çœäº‹ï¼Œå•å…ƒæµ‹è¯•ä¸­ï¼Œä¸€ä¸ªå•å…ƒæµ‹è¯•æ—¢æµ‹è¯•äº†è¯­æ³•æ ‘ç”Ÿæˆï¼Œä¹Ÿæµ‹è¯•äº†è¿è¡Œç»“æœã€‚")]),t._v(" "),n("li",[t._v("å½“æ—¶æˆ‘ä¹Ÿæ²¡æƒ³å¥½ï¼Œç©¶ç«Ÿåº”è¯¥ä»¥ä»€ä¹ˆæ ·çš„å½¢å¼æˆ–è€…æ ¼å¼æ¥ä½œä¸ºä¸­é—´è€…ï¼Œå®ƒåº”è¯¥æ˜¯ä¸€ç§å›ºå®šçš„æ•°æ®æ ¼å¼äº¦æˆ–æ˜¯ä¸€ç§æ•°æ®åè®®ã€‚")])]),t._v(" "),n("blockquote",[n("p",[t._v("æ—¢ç„¶æŠ½è±¡è¯­æ³•æ ‘å·²ç»èƒ½å¤Ÿæ»¡è¶³è§£é‡Šè¿è¡Œçš„éœ€æ±‚äº†ï¼Œä¸ºä»€ä¹ˆè¿˜å¾—è¦ä¸ªä¸­é—´æ•°æ®åè®®å‘¢ï¼Ÿ")])]),t._v(" "),n("p",[t._v("è¿˜è®°å¾—Xcodeä¸­çš„"),n("strong",[t._v("Bitcode")]),t._v("å—ï¼Ÿå®ƒçš„ä½œç”¨å°±æ˜¯ä»¥ LLVM IR æ›¿ä»£ç›®æ ‡ç¨‹åºï¼Œæ¯”å¦‚æˆ‘ä»¬ä¸Šä¼  iTune Store Connect çš„æ—¶å€™ï¼Œå…¶å®ä¸Šä¼ çš„æ˜¯æˆ‘ä»¬çš„LLVM IRï¼Œè‹¹æœåœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šä½¿ç”¨ LLVM å°†æˆ‘ä»¬çš„LLVM IRè½¬æ¢ä¸ºç›¸åº”ç›®æ ‡ç¨‹åºã€‚å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘å°±åœ¨æƒ³ï¼ŒLLVM IR å’Œæˆ‘ä»¬åœ¨é¢å¯¹å¯¹è±¡ä¸­ä½¿ç”¨çš„ Interface ç›¸åŒã€‚å’³å’³ï¼Œè¯´ä¸ªåŸå› ï¼Œè·‘åäº†è¿™ä¹ˆå¤šğŸ˜‚ï¼Œå›åˆ°æ­£é¢˜ã€‚")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("è¯æ³•åˆ†æã€è¯­æ³•åˆ†æäº§ç”Ÿçš„ç›¸å…³å´©æºƒï¼Œåº”è¯¥ç”±ç¼–è¯‘å‰ç«¯æ¥è´Ÿè´£ï¼Œä¸åº”è¯¥å‡ºç°åœ¨è§£é‡Šæ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œæ¯”å¦‚ï¼šè¯­æ³•æŠ¥é”™ç­‰ç­‰ã€‚")])]),t._v(" "),n("li",[n("p",[t._v("ä¸é‡‡ç”¨å…±åŒçš„æ•°æ®æ ¼å¼ï¼Œé‚£å°±åªèƒ½é‡‡ç”¨ä¼ è¾“æºç çš„æ–¹å¼ï¼Œäº¦æˆ–æ˜¯ç›®å‰JSPatchæˆ–è€…Mangoå¯¹æºç è¿›è¡ŒRSAåŠ å¯†çš„æ–¹å¼ã€‚1. ä¸åŠ å¯†ï¼šè¡¥ä¸æºç æ³„æ¼ï¼Œå®‰å…¨é£é™©å¤ªé«˜ï¼Œ 2. RSAåŠ å¯†çš„æ–¹å¼ï¼šæ€§èƒ½æ‹‰å®ï¼Œç ´è§£å¾—åˆ°æºç ä¸éš¾ï¼Œ3. ä¸è®ºåŠ å¯†æˆ–è€…ä¸åŠ å¯†ï¼Œæºç å¢åŠ åï¼Œæ•°æ®é‡å¤§å°çš„å¢é‡æ›´å¤§ã€‚")])]),t._v(" "),n("li",[n("p",[t._v("é’ˆå¯¹ç¼–è¯‘å™¨å‰ç«¯çš„ä¼˜åŒ–ï¼Œä¸å¿…æ¯æ¬¡éƒ½æ›´æ–° OCRunner è§£é‡Šå™¨ã€‚")])]),t._v(" "),n("li",[n("p",[t._v("å„è‡ªæ›´æ¸…æ™°çš„èŒè´£åˆ’åˆ†ã€‚")])]),t._v(" "),n("li",[n("p",[t._v("ä½œè€…å¤ªèœï¼Œå¯¹å†™å‡ºçš„ oc2mangoLib æ²¡ä»€ä¹ˆè‡ªä¿¡ğŸ˜‚ã€‚")])])]),t._v(" "),n("blockquote",[n("p",[t._v("ä»¥é‡‡ç”¨ Json è¡¥ä¸ä¸ºä¸­é—´æ•°æ®æ ¼å¼ä¸ºä¾‹ï¼Œæ­¤æ—¶æˆ‘ä»¬çš„æ•´ä¸ªæµç¨‹å¦‚ä¸‹ï¼š")])]),t._v(" "),n("p",[t._v("Objective-C -> æŠ½è±¡è¯­æ³•æ ‘ -> Jsonè¡¥ä¸ -> æŠ½è±¡è¯­æ³•æ ‘ -> è§£é‡Šæ‰§è¡Œè¯­æ³•æ ‘")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("Objective-C -> æŠ½è±¡è¯­æ³•æ ‘:  oc2mangoLib")])]),t._v(" "),n("li",[n("p",[t._v("æŠ½è±¡è¯­æ³•æ ‘  ->  Jsonè¡¥ä¸:     ORPatchFile")])]),t._v(" "),n("li",[n("p",[t._v("Jsonè¡¥ä¸     ->  æŠ½è±¡è¯­æ³•æ ‘:  ORPatchFile")])]),t._v(" "),n("li",[n("p",[t._v("æŠ½è±¡è¯­æ³•æ ‘ -> è§£é‡Šæ‰§è¡Œè¯­æ³•æ ‘: OCRunner")])])]),t._v(" "),n("h3",{attrs:{id:"ocrunner"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ocrunner"}},[t._v("#")]),t._v(" OCRunner")]),t._v(" "),n("p",[t._v("æœ€åå†ï¼ˆå•°å—¦ï¼‰ä»‹ç»ä¸€ä¸‹ OCRunnerï¼š")]),t._v(" "),n("p",[t._v("é¦–å…ˆ "),n("a",{attrs:{href:"https://github.com/SilverFruity/oc2mango",target:"_blank",rel:"noopener noreferrer"}},[t._v("PatchGenerator"),n("OutboundLink")],1),t._v(" ä½¿ç”¨ oc2mangoLib å°† Objective-C æºç ç”Ÿæˆè¯­æ³•æ ‘ï¼Œéšåä½¿ç”¨ ORPatchFile å°†è¯­æ³•æ ‘åºåˆ—åŒ–ä¸ºè¡¥ä¸æ–‡ä»¶ï¼Œæœ€å OCRunner ä½¿ç”¨ OCPatchFile å°†è¡¥ä¸ååºåˆ—åŒ–ä¸ºè¯­æ³•æ ‘åè§£é‡Šæ‰§è¡Œè¯­æ³•æ ‘ã€‚")]),t._v(" "),n("h4",{attrs:{id:"ä¼˜ç‚¹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¼˜ç‚¹"}},[t._v("#")]),t._v(" ä¼˜ç‚¹:")]),t._v(" "),n("ul",[n("li",[t._v("å‰åç«¯åˆ†ç¦»ï¼šPatchGenerator ç”Ÿæˆè¡¥ä¸ï¼ŒOCRunner è§£é‡Šæ‰§è¡Œè¡¥ä¸ã€‚")]),t._v(" "),n("li",[t._v("è¡¥ä¸æ–‡ä»¶å¤§å°ï¼šç›¸å¯¹äºä¼ è¾“è„šæœ¬æ–‡ä»¶ï¼ŒäºŒè¿›åˆ¶è¡¥ä¸çš„å¤§å°æ‹¥æœ‰æ›´å¥½çš„è¡¨ç°ã€‚")]),t._v(" "),n("li",[t._v("å®Œå–„çš„ Objective-C è¯­æ³•æ”¯æŒï¼šç»“æ„ä½“ï¼ŒProtocolï¼Œæšä¸¾ï¼ŒC å‡½æ•°å£°æ˜å³é“¾æ¥ç³»ç»Ÿå‡½æ•°ï¼Œå¤šå‚æ•°è°ƒç”¨ç­‰ã€‚")]),t._v(" "),n("li",[t._v("å¯é€‰çš„è‡ªå®šä¹‰ Arm64 ABI ï¼šåŸºäº Arm64 è¿‡ç¨‹è°ƒç”¨è§„çº¦å’Œ iOS TypeEncode å®Œæˆã€‚")])]),t._v(" "),n("h4",{attrs:{id:"æ€§èƒ½"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ€§èƒ½"}},[t._v("#")]),t._v(" æ€§èƒ½:")]),t._v(" "),n("p",[t._v("è®¾å¤‡: iPhone SE 2ï¼ŒiOS 14.3")]),t._v(" "),n("p",[t._v("åœ¨æ±‚æ–æ³¢é‚£å¥‘æ•°åˆ—ç¬¬25é¡¹çš„æµ‹è¯•ä¸­:")]),t._v(" "),n("ul",[n("li",[n("strong",[t._v("JSPatch")]),t._v(": æ‰§è¡Œæ—¶é—´ï¼Œå¹³å‡ä¸º 0.169 sã€‚å†…å­˜å ç”¨ä¸€ç›´ç¨³å®šåœ¨ 12 MB å·¦å³ã€‚")]),t._v(" "),n("li",[n("strong",[t._v("OCRunner")]),t._v(": æ‰§è¡Œæ—¶é—´ï¼Œå¹³å‡ä¸º 1.05 sã€‚å†…å­˜å ç”¨ï¼Œå³°å€¼ä¸º 60 MB å·¦å³ï¼Œå…¶ä»–ç¨³å®šåœ¨ 12 MB å·¦å³ã€‚")]),t._v(" "),n("li",[n("strong",[t._v("Mango")]),t._v(": æ‰§è¡Œæ—¶é—´ï¼Œå¹³å‡æ—¶é—´ä¸º 2.38 sã€‚å†…å­˜å ç”¨ï¼ŒæŒç»­èµ°é«˜ï¼Œæœ€é«˜çš„æ—¶å€™å¤§çº¦ä¸º 350 MBã€‚")])]),t._v(" "),n("p",[t._v("ç»“è®º:")]),t._v(" "),n("p",[t._v("ç›®å‰é€’å½’æ–¹æ³•è°ƒç”¨çš„é€Ÿåº¦ï¼Œå¤§çº¦ä¸ºJSPatchçš„1/5å€ï¼Œä¸ºMangoFixçš„2.5å€å·¦å³ã€‚")]),t._v(" "),n("p",[t._v("é—®é¢˜:")]),t._v(" "),n("p",[t._v("å…³äºé€’å½’æ–¹æ³•è°ƒç”¨æ—¶çš„å†…å­˜å ç”¨ï¼Œç›®å‰å­˜åœ¨å ç”¨è¿‡å¤§çš„é—®é¢˜ã€‚æ±‚æ–æ³¢é‚£å¥‘æ•°åˆ—æ•°åˆ—ç¬¬30é¡¹çš„æ—¶å€™ï¼ŒOCRunnerå†…å­˜å³°å€¼å ç”¨å¤§æ¦‚åœ¨600MBã€‚")]),t._v(" "),n("h4",{attrs:{id:"hook-objective-c-æ–¹æ³•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hook-objective-c-æ–¹æ³•"}},[t._v("#")]),t._v(" Hook Objective-C æ–¹æ³•")]),t._v(" "),n("ul",[n("li",[t._v("JSPatch ï¼Œé€šè¿‡å°†ç±»çš„ç›®æ ‡æ–¹æ³•æ›¿æ¢ä¸º objc_msgForwardï¼ŒåŒæ—¶å°† forwardInvocation: æ–¹æ³•çš„ IMP æ›¿æ¢ä¸º JPForwardInvocation å‡½æ•°ï¼Œå½“ç›®æ ‡æ–¹æ³•è¢«è°ƒç”¨æ—¶è§¦å‘æ¶ˆæ¯è½¬å‘ï¼Œåœ¨ JPForwardInvocation å‡½æ•°ä¸­è·å– NSInvocation çš„å„ä¸ªå‚æ•°å€¼ï¼Œå†ä½¿ç”¨ JavaScriptCore è°ƒç”¨ç›¸åº”çš„å‡½æ•°ï¼Œå†å°†å¾—åˆ°çš„ç»“æœè®¾ç½®åˆ° NSInvocation çš„è¿”å›å€¼ã€‚")]),t._v(" "),n("li",[t._v("OCRunnerï¼ˆMangoFixï¼‰ï¼Œé€šè¿‡ç›´æ¥å°†ç±»çš„ç›®æ ‡æ–¹æ³•çš„ IMP ç›´æ¥æ›¿æ¢ä¸ºä½¿ç”¨ libffi æ³¨å†Œçš„ methodIMP å‡½æ•°ï¼Œé€šè¿‡ class å’Œ SEL ä» OCRunner çš„æ–¹æ³•æ³¨å†Œè¡¨ä¸­è·å–åˆ° ORMethodImplementation ï¼Œå°†å®ƒè§£é‡Šæ‰§è¡Œï¼Œè·å–åˆ°ç»“æœåï¼Œå†å†™å…¥ ret æŒ‡é’ˆä¸­ã€‚")])]),t._v(" "),n("h4",{attrs:{id:"é¡¹ç›®æ•´ä½“å›¾"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#é¡¹ç›®æ•´ä½“å›¾"}},[t._v("#")]),t._v(" é¡¹ç›®æ•´ä½“å›¾")]),t._v(" "),n("p",[n("img",{attrs:{src:r(533),alt:""}})]),t._v(" "),n("h3",{attrs:{id:"åç»­æ–‡ç« "}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åç»­æ–‡ç« "}},[t._v("#")]),t._v(" åç»­æ–‡ç« ")]),t._v(" "),n("h4",{attrs:{id:"_1-å®ç°ä¸€ä¸ªç®€å•ç‰ˆ-ocrunner"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-å®ç°ä¸€ä¸ªç®€å•ç‰ˆ-ocrunner"}},[t._v("#")]),t._v(" 1. "),n("a",{attrs:{href:"https://silverfruity.github.io/2021/03/09/OCRunner-SimpleOCRunner/",target:"_blank",rel:"noopener noreferrer"}},[t._v("å®ç°ä¸€ä¸ªç®€å•ç‰ˆ OCRunner"),n("OutboundLink")],1)]),t._v(" "),n("h4",{attrs:{id:"_2-äºŒè¿›åˆ¶è¡¥ä¸æ–‡ä»¶çš„å®ç°"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-äºŒè¿›åˆ¶è¡¥ä¸æ–‡ä»¶çš„å®ç°"}},[t._v("#")]),t._v(" 2. "),n("a",{attrs:{href:"https://silverfruity.github.io/2021/03/09/OCRunner-PatchFile/",target:"_blank",rel:"noopener noreferrer"}},[t._v("äºŒè¿›åˆ¶è¡¥ä¸æ–‡ä»¶çš„å®ç°"),n("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=a.exports}}]);